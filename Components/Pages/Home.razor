@page "/"
@page "/category/{CategorySlug}"

@using BlazorEcommerce.Components.Catalog
@using BlazorEcommerce.Models
@using BlazorEcommerce.Services.ProductService

<PageTitle>Home</PageTitle>

<div class="flex flex-col gap-4">
    <h1 class="text-4xl mb-4">Our Catalogs</h1>

    <div class="grid lg:grid-cols-6 sm:grid-cols-3 h-[70vh] overflow-auto gap-8 p-2">
        @if (_products is not null)
        {
            @foreach (Product product in _products)
            {
                <CardItem Title="@product.Title"
                Description="@product.Description"
                ImageUrl="@product.Image"
                Price="@product.Price"/>
            }
        }
    </div>
</div>

@code{
    [Parameter]
    public string CategorySlug { get; set; } = string.Empty;

    [Inject]
    private ProductService _productService { get; set; } = default!;

    private IEnumerable<Product>? _products = Array.Empty<Product>();

    protected override async Task OnInitializedAsync()
    {
        _products = await _productService.GetProductsAsync();
    }
}
